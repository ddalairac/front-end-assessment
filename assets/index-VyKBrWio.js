import{r as e,a as s,R as t}from"./react-vendor-BW11DH6Q.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver((e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&s(e)})).observe(document,{childList:!0,subtree:!0})}function s(e){if(e.ep)return;e.ep=!0;const s=function(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?s.credentials="include":"anonymous"===e.crossOrigin?s.credentials="omit":s.credentials="same-origin",s}(e);fetch(e.href,s)}}();var i={exports:{}},a={},n=e,r=Symbol.for("react.element"),d=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,l=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function m(e,s,t){var i,a={},n=null,d=null;for(i in void 0!==t&&(n=""+t),void 0!==s.key&&(n=""+s.key),void 0!==s.ref&&(d=s.ref),s)o.call(s,i)&&!c.hasOwnProperty(i)&&(a[i]=s[i]);if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:r,type:e,key:n,ref:d,props:a,_owner:l.current}}a.Fragment=d,a.jsx=m,a.jsxs=m,i.exports=a;var p,_=i.exports,u=s;p=u.createRoot,u.hydrateRoot;const f=({moves:e,timeElapsed:s,onReset:t,setOpenModal:i,isModalOpen:a})=>_.jsx(_.Fragment,{children:_.jsxs("header",{className:"header","data-testid":"game-header",children:[_.jsx("h1",{children:"Memory Card Game"}),_.jsxs("div",{className:"header-controls","aria-hidden":a,children:[_.jsx("button",{className:"reset-button","data-testid":"reset-game-button",onClick:t,disabled:"0:00"===s,tabIndex:a?-1:0,children:"Reset Game"}),_.jsxs("span",{className:"moves","data-testid":"moves-counter",children:["Moves: ",e]}),_.jsxs("span",{className:"time","data-testid":"time-counter",children:["Time: ",s]}),_.jsx("button",{className:"reset-button","data-testid":"change-level-button",onClick:()=>{t(),i(!0)},tabIndex:a?-1:0,children:"Change level"})]})]})}),g=({id:e,image:s,isFlipped:t,isMatched:i,onClick:a})=>_.jsx("div",{"data-testid":`card-${e}`,className:`card ${t?"flipped":""} ${i?"matched":""}`,onClick:a,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),a())},role:"button",tabIndex:t?-1:0,"aria-label":`Card ${e}`,"aria-disabled":i,children:_.jsxs("div",{className:"card-flipper",children:[_.jsx("div",{className:"card-flipper_front",children:_.jsx("img",{src:s,alt:`Card ${e}`,width:200,height:200,loading:"lazy",decoding:"async"})}),_.jsx("div",{className:"card-flipper_back",children:_.jsx("div",{className:"card-back-content"})})]})}),h=({cards:e,onCardFlip:s})=>_.jsx("div",{className:"card-grid","data-testid":"card-grid",children:e.map((e=>_.jsx(g,{id:e.id,image:e.image,isFlipped:e.isFlipped,isMatched:e.isMatched,onClick:()=>s(e.id)},e.id)))}),j=e=>{let s;const t=new Set,i=(e,i)=>{const a="function"==typeof e?e(s):e;if(!Object.is(a,s)){const e=s;s=(null!=i?i:"object"!=typeof a||null===a)?a:Object.assign({},s,a),t.forEach((t=>t(s,e)))}},a=()=>s,n={setState:i,getState:a,getInitialState:()=>r,subscribe:e=>(t.add(e),()=>t.delete(e))},r=s=e(i,a,n);return n},x=e=>e;const v=e=>{const s=(e=>e?j(e):j)(e),i=e=>function(e,s=x){const i=t.useSyncExternalStore(e.subscribe,(()=>s(e.getState())),(()=>s(e.getInitialState())));return t.useDebugValue(i),i}(s,e);return Object.assign(i,s),i},y=(e,s,t)=>{s&&(window.clearInterval(s),t(void 0),e({isTimerRunning:!1}))},b=["/front-end-assessment/assets/img-Asset%201-DnxIF-Qa.jpg","/front-end-assessment/assets/img-Asset%202-B4ZyLrRu.jpg","/front-end-assessment/assets/img-Asset%203-CpEG-6by.jpg","/front-end-assessment/assets/img-Asset%204-BGHbufyP.jpg","/front-end-assessment/assets/img-Asset%205-gMeCHkz8.jpg","/front-end-assessment/assets/img-Asset%206-lI-IZMz9.jpg","/front-end-assessment/assets/img-Asset%207-BBfsaZqr.jpg","/front-end-assessment/assets/img-Asset%208-DMl2_RlE.jpg","/front-end-assessment/assets/img-Asset%209-BPGWVPYf.jpg","/front-end-assessment/assets/img-Asset%2010-WMkOQYzQ.jpg"],M=(C=(e,s)=>{let t;console.log("%c                                         .\n  __  __                                 .\n |  \\/  | ___ _ __ ___   ___  _ __ _   _ .\n | |\\/| |/ _ \\ '_ ` _ \\ / _ \\| '__| | | |.\n | |  | |  __/ | | | | | (_) | |  | |_| |.\n |_|  |_|\\___|_| |_| |_|\\___/|_|   \\__  /.\n   ____                            |___/ .\n  / ___| __ _ _ __ ___   ___             .\n | |  _ / _` | '_ ` _ \\ / _ \\            .\n | |_| | (_| | | | | | |  __/            .\n  \\____|\\__,_|_| |_| |_|\\___|            .\n                                         .\n  by: Dalairac Diego                     .\n                                         .","background: #222; color: #2196f3; font-size: 14px; padding: 0;","https://github.com/ddalairac/front-end-assessment");let i=0;const a=e=>{t=e};return{cards:[],flippedCardsID:[],moves:0,isGameComplete:!1,isProcessing:!1,timeElapsed:"0:00",isTimerRunning:!1,score:0,difficulty:"medium",isModalOpen:!0,setDifficulty:s=>{e({difficulty:s})},setModalOpen:s=>{e({isModalOpen:s})},initializeGame:()=>{y(e,t,a),i=0;let n=3;"medium"===s().difficulty&&(n=5),"hard"===s().difficulty&&(n=10);const r=[];b.slice(0,n).forEach(((e,s)=>{r.push({id:r.length,pairId:s,image:e,isFlipped:!1,isMatched:!1}),r.push({id:r.length,pairId:s,image:e,isFlipped:!1,isMatched:!1})}));const d=[...r].sort((()=>Math.random()-.5));e({cards:d,flippedCardsID:[],moves:0,isGameComplete:!1,isProcessing:!1,timeElapsed:"0:00",isTimerRunning:!1,score:0})},flipCard:n=>{const{cards:r,flippedCardsID:d,moves:o,isProcessing:l,isTimerRunning:c}=s();c||((e,s,t,i)=>{e().isTimerRunning||(s({isTimerRunning:!0}),t(window.setInterval((()=>{var e;s({timeElapsed:(e=i+=1,`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`)})}),1e3)))})(s,e,a,i);const m=r.find((e=>e.id===n));if(!m)return;if(!((e,s,t)=>!(t||e.isFlipped||e.isMatched||s.length>=2))(m,d,l))return;const p=r.map((e=>e.id===n?{...e,isFlipped:!0}:e)),_=[...d,n];if(e({cards:p,flippedCardsID:_}),2===_.length){e({moves:o+1,isProcessing:!0});const[n,d]=_,l=r.find((e=>e.id===n)),c=r.find((e=>e.id===d));if(!l||!c)return void e({isProcessing:!1});l.pairId===c.pairId?((e,s,t,i,a,n,r,d)=>{setTimeout((()=>{const o=e.map((e=>e.id===s||e.id===t?{...e,isMatched:!0,isFlipped:!0}:e));if(i({cards:o,flippedCardsID:[],isProcessing:!1}),o.every((e=>e.isMatched))){y(i,r,d);let s=1e3-10*a().moves-2*n;s=Math.max(0,s),a().moves===e.length/2&&(s+=500),i({isGameComplete:!0,isModalOpen:!0,score:Math.round(s)})}}),500)})(r,n,d,e,s,i,t,a):((e,s,t,i)=>{setTimeout((()=>{const a=e.map((e=>e.id===s||e.id===t?{...e,isFlipped:!1}:e));i({cards:a,flippedCardsID:[],isProcessing:!1})}),1e3)})(r,n,d,e)}}}})?v(C):v;var C;const O=()=>{const{isGameComplete:s,difficulty:t,moves:i,timeElapsed:a,score:n,setDifficulty:r,setModalOpen:d,initializeGame:o}=M(),[l,c]=e.useState(!1);return _.jsxs(_.Fragment,{children:[_.jsx("div",{className:"backdrop "+(l?"closing":""),"data-testid":"modal-backdrop"}),_.jsxs("div",{className:"success-modal "+(l?"closing":""),"data-testid":"game-complete-message",children:[s?_.jsxs(_.Fragment,{children:[_.jsxs("h2",{children:["Congratulations!",_.jsx("br",{}),_.jsx("small",{children:"You completed the game."})]}),_.jsxs("p",{children:[_.jsxs("span",{children:["Moves: ",_.jsx("strong",{children:i})]}),_.jsxs("span",{children:["Time: ",_.jsx("strong",{children:a})]}),_.jsxs("span",{children:["Score: ",_.jsx("strong",{children:n})]})]})]}):_.jsx(_.Fragment,{children:_.jsxs("h2",{children:["Select a difficulty before going to the board",_.jsx("br",{}),_.jsx("small",{children:"Time starts when you turn over the first card"})]})}),_.jsxs("div",{className:"level-options",children:[_.jsx("button",{className:"easy"===t?"active":"",onClick:()=>r("easy"),"data-testid":"easy-level-button",children:"Easy"}),_.jsx("button",{className:"medium"===t?"active":"",onClick:()=>r("medium"),"data-testid":"medium-level-button",children:"Medium"}),_.jsx("button",{className:"hard"===t?"active":"",onClick:()=>r("hard"),"data-testid":"hard-level-button",children:"Hard"})]}),_.jsxs("button",{onClick:()=>{c(!0),o(),setTimeout((()=>{d(!1)}),300)},"data-testid":"play-again-button",children:["Play ",s&&" Again"]})]})]})};function I(){const{cards:e,moves:s,isModalOpen:t,setModalOpen:i,flipCard:a,initializeGame:n,timeElapsed:r}=M();return _.jsxs("div",{className:"app","data-testid":"memory-game-app",children:[_.jsx(f,{onReset:n,moves:s,timeElapsed:r,setOpenModal:i,isModalOpen:t}),_.jsxs("main",{children:[_.jsx(h,{cards:e,onCardFlip:a}),t&&_.jsx(O,{})]})]})}p(document.getElementById("root")).render(_.jsx(e.StrictMode,{children:_.jsx(I,{})}));
