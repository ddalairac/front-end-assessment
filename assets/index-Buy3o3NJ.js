import{r as e,a as s,R as t}from"./react-vendor-CqEpiFl-.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver((e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&s(e)})).observe(document,{childList:!0,subtree:!0})}function s(e){if(e.ep)return;e.ep=!0;const s=function(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?s.credentials="include":"anonymous"===e.crossOrigin?s.credentials="omit":s.credentials="same-origin",s}(e);fetch(e.href,s)}}();var i={exports:{}},r={},a=e,n=Symbol.for("react.element"),d=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,c=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function p(e,s,t){var i,r={},a=null,d=null;for(i in void 0!==t&&(a=""+t),void 0!==s.key&&(a=""+s.key),void 0!==s.ref&&(d=s.ref),s)o.call(s,i)&&!l.hasOwnProperty(i)&&(r[i]=s[i]);if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===r[i]&&(r[i]=s[i]);return{$$typeof:n,type:e,key:a,ref:d,props:r,_owner:c.current}}r.Fragment=d,r.jsx=p,r.jsxs=p,i.exports=r;var m,u=i.exports,h=s;m=h.createRoot,h.hydrateRoot;const f=({onReset:e,moves:s,timeElapsed:t})=>{return u.jsxs("header",{className:"header","data-testid":"game-header",children:[u.jsx("h1",{children:"Memory Card Game"}),u.jsxs("div",{className:"header-controls",children:[u.jsxs("span",{className:"moves","data-testid":"moves-counter",children:["Moves: ",s]}),u.jsxs("span",{className:"moves","data-testid":"time-counter",children:["Time: ",(i=t,`${Math.floor(i/60)}:${(i%60).toString().padStart(2,"0")}`)]}),u.jsx("button",{className:"reset-button","data-testid":"reset-button",onClick:e,children:"Reset Game"})]})]});var i},g=({id:e,image:s,isFlipped:t,isMatched:i,onClick:r})=>u.jsx("div",{"data-testid":`card-${e}`,className:`card ${t?"flipped":""} ${i?"matched":""}`,onClick:r,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),r())},role:"button",tabIndex:t?-1:0,"aria-label":`Card ${e}`,"aria-disabled":i,children:u.jsxs("div",{className:"card-flipper",children:[u.jsx("div",{className:"card-front",children:u.jsx("img",{src:s,alt:`Card ${e}`,width:200,height:200,loading:"lazy",decoding:"async"})}),u.jsx("div",{className:"card-back",children:u.jsx("div",{className:"card-back-content",children:"?"})})]})}),v=({cards:e,onCardFlip:s})=>u.jsx("div",{className:"card-grid","data-testid":"card-grid",children:e.map((e=>u.jsx(g,{id:e.id,image:e.image,isFlipped:e.isFlipped,isMatched:e.isMatched,onClick:()=>s(e.id)},e.id)))}),y=({moves:e,timeElapsed:s,onPlayAgain:t})=>{return u.jsxs("div",{className:"success-modal","data-testid":"game-complete-message",children:[u.jsx("h2",{children:"Congratulations!"}),u.jsxs("p",{children:["You completed the game in ",e," moves."]}),u.jsxs("p",{children:["Time: ",(i=s,`${Math.floor(i/60)}:${(i%60).toString().padStart(2,"0")}`)]}),u.jsx("button",{onClick:t,"data-testid":"play-again-button",children:"Play Again"})]});var i},j=e=>{let s;const t=new Set,i=(e,i)=>{const r="function"==typeof e?e(s):e;if(!Object.is(r,s)){const e=s;s=(null!=i?i:"object"!=typeof r||null===r)?r:Object.assign({},s,r),t.forEach((t=>t(s,e)))}},r=()=>s,a={setState:i,getState:r,getInitialState:()=>n,subscribe:e=>(t.add(e),()=>t.delete(e))},n=s=e(i,r,a);return a},x=e=>e;const C=e=>{const s=(e=>e?j(e):j)(e),i=e=>function(e,s=x){const i=t.useSyncExternalStore(e.subscribe,(()=>s(e.getState())),(()=>s(e.getInitialState())));return t.useDebugValue(i),i}(s,e);return Object.assign(i,s),i},b=["https://picsum.photos/200/200?random=1","https://picsum.photos/200/200?random=2","https://picsum.photos/200/200?random=3","https://picsum.photos/200/200?random=4","https://picsum.photos/200/200?random=5","https://picsum.photos/200/200?random=6"],E=(I=(e,s)=>{let t;return{cards:[],flippedCardsID:[],moves:0,isGameComplete:!1,isProcessing:!1,timeElapsed:0,isTimerRunning:!1,startTimer:()=>{s().isTimerRunning||(e({isTimerRunning:!0}),t=window.setInterval((()=>{e((e=>({timeElapsed:e.timeElapsed+1})))}),1e3))},stopTimer:()=>{t&&(window.clearInterval(t),e({isTimerRunning:!1}))},initializeCards:()=>{const{stopTimer:t}=s();t();const i=[];b.forEach(((e,s)=>{i.push({id:i.length,pairId:s,image:e,isFlipped:!1,isMatched:!1}),i.push({id:i.length,pairId:s,image:e,isFlipped:!1,isMatched:!1})}));const r=[...i].sort((()=>Math.random()-.5));e({cards:r,flippedCardsID:[],moves:0,isGameComplete:!1,isProcessing:!1,timeElapsed:0,isTimerRunning:!1})},flipCard:t=>{const{cards:i,flippedCardsID:r,moves:a,isProcessing:n,isTimerRunning:d,startTimer:o}=s();if(d||o(),n)return;const c=i.find((e=>e.id===t));if(!c)return;if(c.isFlipped)return;if(c.isMatched)return;if(r.length>=2)return;const l=i.map((e=>e.id===t?{...e,isFlipped:!0}:e)),p=[...r,t];if(e({cards:l,flippedCardsID:p}),2===p.length){e({moves:a+1,isProcessing:!0});const t=p[0],r=p[1],n=i.find((e=>e.id===t)),d=i.find((e=>e.id===r));if(!n||!d)return void e({isProcessing:!1});n.pairId===d.pairId?setTimeout((()=>{const a=i.map((e=>e.id===t||e.id===r?{...e,isMatched:!0,isFlipped:!0}:e));if(e({cards:a,flippedCardsID:[],isProcessing:!1}),a.every((e=>e.isMatched))){const{stopTimer:t}=s();t(),e({isGameComplete:!0})}}),500):setTimeout((()=>{const s=i.map((e=>e.id===t||e.id===r?{...e,isFlipped:!1}:e));e({cards:s,flippedCardsID:[],isProcessing:!1})}),1e3)}},resetGame:()=>{s().initializeCards()}}})?C(I):C;var I;function N(){const{cards:s,moves:t,resetGame:i,isGameComplete:r,flipCard:a,initializeCards:n,timeElapsed:d}=E();return e.useEffect((()=>{n()}),[n]),u.jsxs("div",{className:"app","data-testid":"memory-game-app",children:[u.jsx(f,{onReset:i,moves:t,timeElapsed:d}),u.jsxs("main",{children:[u.jsx(v,{cards:s,onCardFlip:a}),r&&u.jsx(y,{moves:t,timeElapsed:d,onPlayAgain:i})]})]})}m(document.getElementById("root")).render(u.jsx(e.StrictMode,{children:u.jsx(N,{})}));
